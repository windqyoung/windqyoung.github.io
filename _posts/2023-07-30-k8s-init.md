---
title: k8s服务初始化记录
---


1. 修改 containerd 默认设置

    `containerd config default > /etc/containerd/config`

    修改 `SystemdCgroup = true`

    修改 `sandbox_image = "registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.9"`

    版本根据 `kubeadm config images list` 的值而定


2. 执行k8s初始化, IP根据下一步中的配置文件中的`net-conf.json.NetWork`而定

    下面命令使用的镜你, 可以自己下载

    `kubeadm init --image-repository registry.cn-hangzhou.aliyuncs.com/google_containers --pod-network-cidr 10.244.0.0/16`

3. 安装网络插件

    `kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml`

4. 根据上一步命令的结果, 设置配置文件

5. 查看结果 `kubectl get nodes`



